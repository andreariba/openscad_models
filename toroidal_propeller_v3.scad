use <loft.scad>

//2032c_points = [[1000,1.6],[950,12.4],[900,22.9],[800,42.8],[700,61],[600,77.1],[500,90.5],[400,100.2],[300,104.8],[250,104.4],[200,101.3],[150,93.4],[100,78],[75,66.4],[50,51.3],[25,31.7],[12.5,19.3],[0,0],[12.5,-5],[25,-4.2],[50,-1],[75,2.8],[100,6.8],[150,14.5],[200,21.7],[250,28.2],[300,33.3],[400,38.5],[500,38.6],[600,35],[700,28.6],[800,20.2],[900,10],[950,4.4]];

//bw3_points = [[1000,3.495],[997.54,5.377],[990.7,9.832],[980.37,14.829],[966.98,19.224],[950.44,22.809],[930.64,25.869],[907.75,28.919],[882.02,32.37],[853.7,36.37],[823.09,40.841],[790.48,45.621],[756.16,50.519],[720.43,55.358],[683.59,59.983],[645.94,64.264],[607.78,68.087],[569.37,71.364],[530.99,74.019],[492.65,76.004],[454.35,77.273],[416.3799,77.828],[378.87,77.706],[342.04,76.951],[306.0899,75.596],[271.2,73.64],[237.6,71.048],[205.49,67.764],[175.04,63.738],[146.48,58.982],[119.99,53.604],[95.76,47.811],[73.95,41.881],[54.68,36.113],[38.11,30.75],[24.33,25.682],[13.38,20.381],[5.4799,14.376],[0.98,7.575],[0,2.3739],[0.98,-2.675],[5.4799,-8.511],[13.38,-12.196],[24.33,-13.947],[38.11,-14.217],[54.68,-12.611],[73.95,-8.303],[95.76,-1.757],[119.99,5.319],[146.48,11.745],[175.04,17.421],[205.49,22.413],[237.6,26.61],[271.2,30.055],[306.0899,32.881],[342.04,35.149],[378.87,36.877],[416.3799,38.04],[454.35,38.516],[492.65,38.182],[530.99,37.048],[569.37,35.252],[607.78,32.983],[645.94,30.383],[683.59,27.494],[720.43,24.32],[756.16,20.901],[790.48,17.338],[823.09,13.759],[853.7,10.295],[882.02,7.041],[907.75,4.033],[930.64,1.266],[950.44,-1.411],[966.98,-4.58],[980.37,-7.425],[990.7,-7.524],[997.54,-4.897]];

//s1223_points = [[1000,0],[998.38,1.26],[994.17,4.94],[988.25,10.37],[980.75,16.46],[971.11,22.5],[958.84,28.53],[943.89,34.76],[926.39,41.16],[906.41,47.68],[884.06,54.27],[859.47,60.89],[832.77,67.49],[804.1199,74.02],[773.69,80.44],[741.66,86.71],[708.23,92.77],[673.6,98.59],[637.98,104.12],[601.58,109.35],[564.65,114.25],[527.44,118.81],[490.25,123.03],[453.4,126.83],[417.21,130.11],[381.93,132.71],[347.77,134.47],[314.88,135.26],[283.47,135.05],[253.7,133.46],[225.41,130.37],[198.46,125.94],[172.86,120.26],[148.63,113.55],[125.91,105.98],[104.82,97.7],[85.45,88.7899],[67.89,79.4],[52.23,69.65],[38.55,59.68],[26.94,49.66],[17.55,39.61],[10.2799,29.54],[4.95,19.69],[1.55,10.33],[0.05,1.78],[0.44,-5.6101],[2.64,-11.2],[7.89,-14.27],[17.18,-15.5],[30.06,-15.84],[46.27,-15.32],[65.61,-14.04],[87.87,-12.02],[112.82,-9.25],[140.2,-5.63],[170.06,-0.75],[202.7799,5.35],[238.4,12.13],[276.7299,19.2799],[317.5,26.52],[360.44,33.58],[405.19,40.21],[451.39,46.18],[498.6,51.29],[546.39,55.34],[594.28,58.2],[641.76,59.76],[688.32,59.94],[733.44,58.72],[776.6,56.12],[817.29,52.19],[855,47.06],[889.28,40.88],[919.66,33.87],[945.73,26.24],[966.93,18.22],[982.55,10.6],[992.68,4.68],[998.25,1.15]];

s1223_mod_points = [[1005.46,2.34],[1010.53,5.73],[1013.92,10.8],[1015.11,16.78],[1013.92,22.76],[1010.53,27.83],[999.48,32.41],[997.85,32.62],[993.52,36.17],[987.44,41.41],[979.75,47.26],[969.92,52.99],[957.47,58.63],[942.33,64.39],[924.64,70.24],[904.47,76.13],[881.92,82.01],[857.13,87.86],[830.24,93.61],[801.4,99.24],[770.78,104.7],[738.57,109.96],[704.97,114.97],[670.17,119.7],[634.39,124.11],[597.85,128.19],[560.78,131.93],[523.45,135.32],[486.14,138.37],[449.19,141.01],[412.92,143.15],[377.57,144.64],[343.37,145.33],[310.48,145.08],[279.09,143.89],[249.38,141.36],[221.2,137.39],[194.41,132.11],[169.0,125.63],[144.99,118.16],[122.52,109.88],[101.7,100.94],[82.62,91.43],[65.36,81.49],[50.02,71.26],[36.66,60.86],[25.37,50.48],[16.3,40.14],[9.35,29.85],[4.33,19.84],[1.22,10.37],[-0.01,1.78],[0.44,-5.61],[2.64,-11.2],[7.89,-14.27],[17.18,-15.5],[30.06,-15.84],[46.27,-15.32],[65.61,-14.04],[87.87,-12.02],[112.82,-9.25],[140.2,-5.63],[170.06,-0.75],[202.78,5.35],[238.4,12.13],[276.73,19.28],[317.5,26.52],[360.44,33.58],[405.19,40.21],[451.39,46.18],[498.6,51.29],[546.39,55.34],[594.28,58.2],[641.76,59.76],[688.32,59.94],[733.44,58.72],[776.6,56.12],[817.29,52.19],[855.0,47.06],[889.28,40.88],[919.66,33.87],[945.73,26.24],[966.93,18.22],[982.55,10.6],[992.68,4.68],[998.25,1.15]];

points = s1223_mod_points;

//translate([10,0,0]) scale(0.01) polygon(s1223_points);

function rotated_foil(rotation,angle) = [
    for (i = [0:len(points)-1])
        (0.005*cos(angle)*cos(angle)+0.004)*[[cos(rotation),0,-sin(rotation)],[0,1,0],[sin(rotation),0,cos(rotation)]]*[points[i][0]-500,0, points[i][1]] + 10*[cos(angle),sin(angle),0]
];

module single_propeller() {
    angle_step = 5;
    rotate([0,-5,0])
    translate([0,0,-0.1])
    scale([0.6,1.0,1.0])
    for (angle = [0:angle_step:360]) {
        loft(rotated_foil(-15,angle),rotated_foil(-15,angle+angle_step), number_of_layers=10);
    }
};

module propeller() {
    difference(){
        union(){
            scale(0.3)
            translate([0,-10,0])
            single_propeller();
            scale(0.3)
            translate([0,10,0])
            rotate([0,0,180])
            single_propeller();
                
            translate([0,0,-0.25])
            cylinder(0.5,r1=0.6,r2=0.6);
            }


        translate([0,0,-0.25])
        cylinder(0.5,r1=0.25,r2=0.25);
    }
}

scale(10) propeller();

//scale(10) translate([0,0,-0.50]) cylinder(1.0,r1=0.25,r2=0.25);

//scale(0.01) polygon(s1223_mod_points);

$fn=80;

